# Godot çª—å£æ¯”ä¾‹é”å®šå·¥å…·ï¼ˆWindow Aspect Ratio Enforcerï¼‰

[ğŸ‡ºğŸ‡¸ English](README.md) | [ğŸ‡¨ğŸ‡³ ç®€ä½“ä¸­æ–‡](README.zh.md)

ä¸€ä¸ªè½»é‡çš„ GDScript å·¥å…·ï¼Œæ”¯æŒåœ¨çª—å£ç¼©æ”¾æ—¶è‡ªåŠ¨ç»´æŒå›ºå®šæˆ–èŒƒå›´é™å®šçš„å®½é«˜æ¯”ã€‚å…¼å®¹ä¸»æµæ¡Œé¢å¹³å°ï¼Œè¡Œä¸ºè‡ªç„¶å¹³æ»‘ï¼Œé€‚åˆæ¸¸æˆå’Œå·¥å…·é¡¹ç›®çš„çª—å£ç®¡ç†ã€‚

## âœ¨ åŠŸèƒ½ç‰¹ç‚¹

- ğŸ–¼ï¸ **çª—å£æ¯”ä¾‹é”å®š**ï¼šè‡ªåŠ¨ä¿æŒè®¾å®šçš„å®½é«˜æ¯”ï¼Œä¸ä¼šè¢«éšæ„æ‹‰ä¼¸å˜å½¢ã€‚
- ğŸ–±ï¸ **æ™ºèƒ½è¯†åˆ«ç¼©æ”¾æ–¹å‘**ï¼šæ ¹æ®ç”¨æˆ·æ˜¯æ‹–åŠ¨è¾¹ç¼˜è¿˜æ˜¯è§’è½ï¼Œè‡ªåŠ¨åˆ‡æ¢ç¼©æ”¾ç­–ç•¥ã€‚
- ğŸ•’ **é˜²æŠ–æœºåˆ¶**ï¼šä½¿ç”¨è®¡æ—¶å™¨å»¶è¿Ÿæ‰§è¡Œç¼©æ”¾é€»è¾‘ï¼Œé¿å…æ‹–åŠ¨å¡é¡¿ã€‚
- âš™ï¸ **å¯é…ç½®æ¯”ä¾‹èŒƒå›´**ï¼šå…è®¸è®¾å®šæœ€å°å’Œæœ€å¤§æ¯”ä¾‹èŒƒå›´ï¼Œçµæ´»é€‚é…ä¸åŒåˆ†è¾¨ç‡éœ€æ±‚ã€‚
- âœ… **å³æ’å³ç”¨**ï¼šåªéœ€ä¸€é”® Autoloadï¼Œæ— éœ€ä¿®æ”¹é¡¹ç›®å…¶ä»–è®¾ç½®ã€‚

## ğŸ“¦ å®‰è£…æ–¹å¼

1. ä¸‹è½½ `WindowAspectRatio.gd` åˆ°ä½ çš„é¡¹ç›®ç›®å½•ï¼Œä¾‹å¦‚æ”¾å…¥ `addons/` æ–‡ä»¶å¤¹ã€‚
2. æ‰“å¼€ **é¡¹ç›®è®¾ç½® â†’ Autoload** é¡µé¢ã€‚
3. æ·»åŠ è„šæœ¬ä¸ºè‡ªåŠ¨åŠ è½½
4. å®Œæˆï¼é¡¹ç›®å¯åŠ¨åå°†è‡ªåŠ¨å¯ç”¨çª—å£æ¯”ä¾‹é™åˆ¶åŠŸèƒ½ã€‚

## ğŸ§  å·¥ä½œåŸç†

æœ¬è„šæœ¬ç›‘å¬çª—å£çš„ `size_changed` ä¿¡å·ï¼Œå¹¶åœ¨ç”¨æˆ·åœæ­¢æ‹–åŠ¨åï¼ˆç”±è®¡æ—¶å™¨æ§åˆ¶ï¼‰å¤„ç†å®é™…ç¼©æ”¾é€»è¾‘ã€‚

- å¦‚æœæ˜¯**æ¨ªå‘æ‹‰ä¼¸**ï¼ˆå®½åº¦å˜åŒ–æ›´æ˜æ˜¾ï¼‰ â†’ è‡ªåŠ¨è°ƒæ•´é«˜åº¦ï¼›
- å¦‚æœæ˜¯**çºµå‘æ‹‰ä¼¸**ï¼ˆé«˜åº¦å˜åŒ–æ›´æ˜æ˜¾ï¼‰ â†’ è‡ªåŠ¨è°ƒæ•´å®½åº¦ï¼›
- å¦‚æœæ˜¯**å¯¹è§’çº¿æ‹‰ä¼¸**ï¼ˆè§’è½ï¼‰ â†’ æ‰§è¡Œç­‰æ¯”ä¾‹ç¼©æ”¾ã€‚

ç¼©æ”¾ç»“æœä¼šè¢«é™åˆ¶åœ¨ `ratio_range` æŒ‡å®šçš„æœ€å°å’Œæœ€å¤§å®½é«˜æ¯”ä¹‹é—´ã€‚

## ğŸ› ï¸ ä½¿ç”¨è¯´æ˜ä¸å‚æ•°é…ç½®

ä½ å¯ä»¥åœ¨è„šæœ¬ä¸­ä¿®æ”¹ä»¥ä¸‹å¯¼å‡ºå˜é‡æ¥æ§åˆ¶å…è®¸çš„æ¯”ä¾‹èŒƒå›´ï¼š

```gdscript
@export var ratio_range: Vector2 = Vector2(1.0, 16.0 / 9.0)
````

è¿™ä¸ªèŒƒå›´è¡¨ç¤ºï¼š

* `1.0` è¡¨ç¤ºæœ€å°æ¯”ä¾‹ä¸º 1:1ï¼ˆæ­£æ–¹å½¢ï¼‰
* `16.0 / 9.0` è¡¨ç¤ºæœ€å¤§æ¯”ä¾‹ä¸º 16:9ï¼ˆå®½å±ï¼‰

è‹¥å¸Œæœ›å¼ºåˆ¶ä½¿ç”¨å›ºå®šæ¯”ä¾‹ï¼ˆå¦‚å§‹ç»ˆä¸º 16:9ï¼‰ï¼Œå¯ä»¥å°†ä¸¤ä¸ªå€¼è®¾ç½®ä¸ºç›¸åŒï¼š

```gdscript
@export var ratio_range: Vector2 = Vector2(16.0 / 9.0, 16.0 / 9.0)
```

### ç¼©æ”¾æ–¹å‘åˆ¤æ–­ç¤ºä¾‹ï¼ˆæ ¸å¿ƒé€»è¾‘ç‰‡æ®µï¼‰ï¼š

```gdscript
var current_size = get_window().size
var delta = current_size - previous_size

if abs(delta.x) > abs(delta.y) * 1.5:
    # è¾¹ç¼˜ - æ¨ªå‘æ‹–åŠ¨
    new_size = constrain_width(current_size)
elif abs(delta.y) > abs(delta.x) * 1.5:
    # è¾¹ç¼˜ - çºµå‘æ‹–åŠ¨
    new_size = constrain_height(current_size)
else:
    # è§’è½ - ç­‰æ¯”ç¼©æ”¾
    new_size = enforce_aspect_ratio(current_size)
```

## ğŸ’¡ ä½¿ç”¨å»ºè®®

* æœ¬å·¥å…·ä»…é€‚ç”¨äºæ¡Œé¢ç«¯ï¼ˆ`OS.has_feature("desktop")`ï¼‰
* æ¨èä¸ `Windowed` æˆ– `Borderless` æ¨¡å¼æ­é…ä½¿ç”¨ï¼ˆä¸å»ºè®®å…¨å±ï¼‰
* å¯æ ¹æ®éœ€è¦ä¿®æ”¹ `resize_timer.wait_time` æ¥è°ƒæ•´é˜²æŠ–å»¶è¿Ÿ

## ğŸ“„ License

MIT å¼€æºè®¸å¯

---

ç”± â¤ï¸ åˆ¶ä½œï¼ŒåŸºäº Godot Engine å¼•æ“ã€‚
